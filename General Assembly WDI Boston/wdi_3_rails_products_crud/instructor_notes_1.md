## Simple Products application.

We will create a simple app that will show all the products and one product.

The objective of this lesson is to become familiar with:  
* Rails routes  
* Controllers  
* Actions  
* Views, ERB templates  
* The render method  
* A Layout  

A Product will have a __name__, __description__ and __price__. 

#### Create a Product model.

```
rails g model Product name description:text price:decimal
```



## Create a Products Controller with an index action.  

```
$ touch app/controllers/products_controller.rb
```


#### Create a Product Controller.  

In app/controller/products_controller.rb  

```
class ProductsController < ApplicationController
  def index
  end
end
```

__Go to http://localhost:3000/products__

You should get an error: No route matches [GET] "/products"  

#### Create a Route for the Product index action.  

Need to add a route for this Controller index action.  

In config/routes.rb

```
  # Maps the URL to a controller#action
  get '/products', to: 'products#index'

  # get - HTTP GET method to match.
  # '/products'  - Path in the URL to match
  # 'products#index' - Indentifies the Controller and Action to
  # invoke.
```


__Go to http://localhost:3000/products__  
You should get a 'Template is missing' error.

#### Create a view for the Products index action. 

```
mkdir app/views/products
touch app/views/products/index.html.erb
```

Add some text into this index view the goto http://localhost:3000  

```
  "Hello from the index.html.erb view. I got here via the controller: product, action: index"
```

### Lets draw what is going on here?

Yep, on the whiteboard.  



#### Add the _render_ method to the Products index action.  

```
  # This will render the index view.
  # Don't need this because by default an action will
  # render a view that has the same name as the action.
  render :index
```


#### Add breakproint in the index action.

Add binding.pry to the index action and refresh your browser.  

Now you should be in the index action.  

Look at the params hash. Notice it has two entries, one for the 
the name of the controller and one for the name of the action.

#### Use the params hash in the view.

In the index view.  

```
  Hello from the index.html.erb view. I got here via the controller:
  <%= params[:controller]} %>, <%= action: #{params[:action]} %>
```

### Show ALL of the products.

Add this to the index action.  

```
  # Create an instance variable, @products, that will contain an
    "Array" of all the products.
  @products = Product.all
```

In the index view add.  

```
  <ul>
    <% @products.each do |product| %>
      <li>Product <%=product.name%>, price is <%= product.price %></li>
    <% end %>
  </ul>
```

This will iterate over all of the products show each one's name and price.
http://localhost:3000/products


## LAB: Show all Songs.

Pretty much like the above. Create a model, seed songs and show all songs.

A Song will have a title, artist, duration (seconds) and price. 


## Demo

#### Create an action that will show ONE product.

Create a route in the routes file.  

```
get '/products/:id', to: 'product#show'
```

Add a show action to the products controller.  

```
def show
    @product = Product.find(params[:id])
end
```

Add a binding.pry in the show action and look at the params hash.


1. How is this used in the show action?
2. How does the new entry in the params hash relate to the route for this show view?


Oops, add a show view.


#### Add show view to show off the product.

## LAB: Show one Song.

Pretty much like the above.

## Demo  

#### Look at the layout file. 

1. Where is it?  
2. What does it do it?   

Add this to the layout in the body tag.  


```
 <h3>Honest Tom's Products</h3>
```


####  What is the yield in the layout file?

The <%= yield %> in the layout will be replaced by the output generated by the view.



